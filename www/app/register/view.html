<ion-view view-title="Crear cuenta">
  <ion-header-bar align-title="left" class="bar-positive">
  <div class="buttons">
    <button class="button ion-chevron-left" ui-sref="login"></button>
  </div>
  <h1 class="title">Crear Cuenta</h1>
</ion-header-bar>
  <ion-content class="padding">
    <form name="register" autocomplete="off" ng-submit="vm.createAccount()">
      <div class="card">
        <div class="item item-divider">
          Datos del Usuario
        </div>
        <div class="list">
          <label class="item item-input">
            <span class="input-label">Usuario</span>
            <input type="text" name="username" ng-model="vm.user.info.username" required>
          </label>
          <label class="item" ng-show="(register.username.$touched && register.username.$error.required)">
            <span class="error">Debe ingresar un nombre de usuario</span>
          </label>
          <label class="item item-input">
            <span class="input-label">Nombre</span>
            <input type="text" name="name" ng-model="vm.user.info.name" required>
          </label>
          <label class="item" ng-show="(register.name.$touched && register.name.$error.required)">
            <span class="error">Debe ingresar un nombre</span>
          </label>
          <label class="item item-input">
            <span class="input-label">Apellidos</span>
            <input type="text" ng-model="vm.user.info.surName">
          </label>
          <label class="item item-input">
            <span class="input-label">Email</span>
            <input type="email" name="email" ng-model="vm.user.credentials.email" required>
          </label>
          <label class="item" ng-show="(register.email.$touched && register.email.$error.required)">
            <span class="error">Debe ingresar un email</span>
          </label>
          <label class="item" ng-show="register.email.$error.email">
            <span class="error">Email inválido</span>
          </label>
          <label class="item item-input">
            <span class="input-label">Contraseña</span>
            <input type="password" name="password" ng-model="vm.user.credentials.password" ng-minlength="6" required>
          </label>
          <label class="item" ng-show="(register.password.$touched && register.password.$error.required)">
            <span class="error">Debe ingresar una contraseña</span>
          </label>
          <label class="item" ng-show="register.password.$error.minlength">
            <span class="error">La contraseña debe tener al menos 6 caracteres</span>
          </label>
          <label class="item item-input">
            <span class="input-label">Repetir contraseña</span>
            <input type="password" name="passwordConfirm" ng-model="vm.passwordConfirm" ng-pattern="{{ vm.user.credentials.password }}" required>
          </label>
          <label class="item" ng-show="(register.passwordConfirm.$touched && register.passwordConfirm.$error.required)">
            <span class="error">Repita la contraseña</span>
          </label>
          <label class="item" ng-show="register.passwordConfirm.$error.pattern">
            <span class="error">Las contraseñas no coinciden</span>
          </label>
        </div>
      </div>

      <div class="card" ng-show="vm.user.credentials.password">
        <div class="item item-divider">
          Seguridad de la contraseña
        </div>
        <div class="password-strength-indicator"
             ng-class="{'weak': vm.isPasswordWeak(),
                       'med': vm.isPasswordMed(),
                       'strong': vm.isPasswordStrong()}"
             ng-password-strength="vm.user.credentials.password"
             strength="vm.passwordStrength"
             style="width: {{ vm.passwordStrength }}%; transition: width 0.2s;"></div>
      </div>

      <div class="card">
        <div class="item item-divider">
          Género
        </div>
        <ion-radio ng-model="vm.user.info.gender" ng-value="'Male'">Masculino</ion-radio>
        <ion-radio ng-model="vm.user.info.gender" ng-value="'Female'">Femenino</ion-radio>
      </div>

      <div class="card">
        <div class="item item-divider">
          Fecha de nacimiento
        </div>
        <div class="padding-horizontal">
          <ionic-datepicker input-obj="vm.datePickerConfig">
            <a class="button icon-left button-block button-outline button-dark icon ion-ios-calendar-outline"> {{  vm.user.info.birthDay | date:'dd/MM/yyyy' }}</a>
          </ionic-datepicker>
        </div>
      </div>

      <button class="button button-block button-assertive" type="submit" on-click="vm.createAccount()" ng-disabled="register.$invalid">Registrarme</button>
    </form>
  </ion-content>
</ion-view>
